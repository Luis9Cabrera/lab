---
import { studies } from "../data/studies";
import { Info } from "lucide-astro";
import Modal from "./Modal.astro";

const popularStudies = studies.slice(0, 6);
---

<section id="servicios" class="py-24">
  <div class="container mx-auto px-6">
    <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
      <div class="max-w-xl">
        <h2 class="text-3xl md:text-5xl font-bold text-primary mb-4">
          Estudios Populares
        </h2>
        <p class="text-slate-600">
          Estudios clínicos esenciales realizados con atención profesional y enfoque en tu bienestar.
        </p>
      </div>
      <a
        href="/estudios"
        class="text-secondary font-bold flex items-center gap-2 hover:underline"
      >
        Ver catálogo completo →
      </a>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {popularStudies.map((study) => (
        <div class="relative glass p-8 rounded-[2.5rem] overflow-hidden group hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 border border-slate-100/50">

          <!-- Watermark -->
          <div class="absolute right-6 bottom-6 w-24 h-24 text-secondary/5 group-hover:text-secondary/10 transition-all pointer-events-none">
            <study.icon class="w-full h-full" />
          </div>

          <div class="flex justify-between items-start mb-6">
            <div class="p-4 bg-secondary/10 rounded-2xl text-secondary group-hover:bg-secondary group-hover:text-white transition-all duration-500">
              <study.icon class="w-7 h-7" />
            </div>
            <span class="px-3 py-1 bg-slate-100 text-slate-500 rounded-full text-xs font-bold uppercase tracking-wider">
              {study.category}
            </span>
          </div>

          <h3 class="text-2xl font-bold text-primary mb-3 group-hover:text-secondary transition-colors line-clamp-1">
            {study.name}
          </h3>

          <p class="text-slate-500 mb-8 line-clamp-2">
            {study.desc}
          </p>

          <button
            class="open-modal-trigger w-full py-4 bg-slate-50 hover:bg-primary text-primary hover:text-white rounded-2xl font-bold transition-all flex items-center justify-center gap-2 group/btn"
            data-study={JSON.stringify(study)}
          >
            Ver información completa
            <Info class="w-5 h-5 opacity-50 group-hover/btn:opacity-100 transition-opacity" />
          </button>
        </div>
      ))}
    </div>
  </div>
</section>

<Modal />
